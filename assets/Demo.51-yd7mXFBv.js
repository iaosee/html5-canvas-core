import{B as w}from"./BaseDemo-CScLeyCm.js";import{S as T}from"./Sprite-DYUj_957.js";import{I as m}from"./ImagePainter-MTFtyqfa.js";import{b as v}from"./bomb-BLXqLVh_.js";class P extends T{constructor(l="DoraemonSprite"){super(l),this.painter=new S}}class S{paint(l,i){i.save(),i.translate(l.x,l.y),i.scale(.5,.5),i.beginPath(),i.lineWidth=1,i.strokeStyle="#000",i.arc(200,175,175,.7*Math.PI,.3*Math.PI),i.fillStyle="#0bb0da",i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.moveTo(110,110),i.quadraticCurveTo(-10,200,120,315),i.lineTo(280,315),i.quadraticCurveTo(410,210,290,110),i.lineTo(110,110),i.fill(),i.stroke(),i.beginPath(),i.lineWidth=1,i.fillStyle="#fff",i.moveTo(110,110),i.bezierCurveTo(110,25,200,25,200,100),i.bezierCurveTo(200,175,110,175,110,100),i.moveTo(200,100),i.bezierCurveTo(200,25,290,25,290,100),i.bezierCurveTo(290,175,200,175,200,100),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#000",i.arc(230,130,12,0,2*Math.PI),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#000",i.arc(170,130,12,0,2*Math.PI),i.fill(),i.stroke(),i.beginPath(),i.arc(200,165,25,0,2*Math.PI),i.fillStyle="#d05823",i.fill(),i.stroke(),i.beginPath(),i.moveTo(80,175),i.lineTo(150,195),i.moveTo(80,200),i.lineTo(150,205),i.moveTo(80,225),i.lineTo(150,215),i.moveTo(200,195),i.lineTo(200,290),i.moveTo(250,195),i.lineTo(320,175),i.moveTo(250,205),i.lineTo(320,200),i.moveTo(250,215),i.lineTo(320,225),i.stroke(),i.moveTo(80,240),i.quadraticCurveTo(200,350,320,240),i.stroke(),i.beginPath(),i.moveTo(96,316),i.lineTo(305,316),i.lineTo(320,316),i.arcTo(330,316,330,326,10),i.lineTo(330,336),i.arcTo(330,346,305,346,10),i.lineTo(81,346),i.arcTo(71,346,71,336,10),i.lineTo(71,326),i.arcTo(71,316,81,316,10),i.lineTo(96,316),i.fillStyle="#b13209",i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#0bb0da",i.moveTo(80,346),i.lineTo(26,406),i.lineTo(65,440),i.lineTo(85,418),i.lineTo(85,528),i.lineTo(185,528),i.lineTo(315,528),i.lineTo(315,418),i.lineTo(337,440),i.lineTo(374,406),i.lineTo(320,346),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.arc(37,433,30,0,2*Math.PI),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.arc(363,433,30,0,2*Math.PI),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.arc(200,400,91,1.8*Math.PI,1.2*Math.PI),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.moveTo(130,394),i.lineTo(270,394),i.moveTo(130,394),i.bezierCurveTo(130,490,270,490,270,394),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.arc(200,529,20,Math.PI,0),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.moveTo(180,528),i.lineTo(72,528),i.bezierCurveTo(52,528,52,558,72,558),i.lineTo(180,558),i.moveTo(180,558),i.bezierCurveTo(200,558,200,528,180,528),i.fill(),i.stroke(),i.beginPath(),i.fillStyle="#fff",i.moveTo(220,528),i.lineTo(328,528),i.bezierCurveTo(348,528,348,558,328,558),i.lineTo(220,558),i.moveTo(220,558),i.bezierCurveTo(200,558,200,528,220,528),i.fill(),i.stroke(),i.restore()}}class u{paint(l,i){const r=l.x+l.width/2,a=l.y+l.height/2;l.width,l.height;const h=l.width/2;i.save(),i.beginPath(),i.arc(r,a,h,0,Math.PI*2,!1),i.clip(),i.shadowColor="rgba(0,0,0,0.5)",i.shadowOffsetX=-4,i.shadowOffsetY=-4,i.shadowBlur=8,i.fillStyle="rgba(218, 165, 32, 0.1)",i.fill(),i.lineWidth=2,i.strokeStyle="rgb(100,100,195)",i.stroke(),i.restore()}}class g extends w{constructor(l){super(l),this.name="精灵绘制器 —— 描边与填充/图像图像精灵",this.doraemon=new P,this.ballPainter=new u,this.config={CLOCK_RADIUS:this.viewMin/2-15,HOUR_HAND_TRUNCATION:30},this.initSprite()}static init(l){return new g(l)}initSprite(){return this.ball1=new T("ball1",{paint(l,i){i.save(),i.beginPath(),i.arc(l.x+l.width/2,l.y+l.height/2,100,0,Math.PI*2,!1),i.clip(),i.shadowColor="rgba(0,0,0,0.5)",i.shadowOffsetX=-4,i.shadowOffsetY=-4,i.shadowBlur=8,i.lineWidth=2,i.strokeStyle="rgb(100,100,195)",i.fillStyle="rgba(30,144,255,0.15)",i.fill(),i.stroke(),i.restore()}}),this.ball1.setX(100),this.ball1.setY(100),this.ball2=new T("ball2",this.ballPainter),this.bomb=new T("bomb",new m(v)),this.bomb.x=100,this.bomb.y=this.height/2,this.doraemon.x=this.width-300,this.doraemon.y=50,this}draw(){return this.clearScreen().drawGrid().drawScene()}drawScene(){const{context:l}=this;return this.ball1.paint(l),this.drawClock(),this.bomb.paint(l),this.doraemon.paint(l),this}drawClock(){return this.drawClockFace(),this.drawHands(),this}drawClockFace(){const{context:l,canvas:i,config:r}=this;return l.beginPath(),l.arc(this.centerX,this.centerY,r.CLOCK_RADIUS,0,Math.PI*2,!1),l.save(),l.strokeStyle="rgba(0,0,0,0.2)",l.stroke(),l.restore(),this}drawHands(){const{context:l,canvas:i,config:r,ball2:a}=this,h=new Date,s=h.getHours(),e=s>12?s-12:s;return a.width=20,a.height=20,this.drawHand(h.getSeconds(),!1),a.width=30,a.height=30,this.drawHand(h.getMinutes(),!1),a.width=50,a.height=50,this.drawHand(e*5+h.getMinutes()/60*5),a.width=30,a.height=30,a.x=this.centerX-a.width/2,a.y=this.centerY-a.height/2,l.save(),this.ballPainter.paint(a,l),l.restore(),this}drawHand(l,i){const{context:r,canvas:a,config:h,ball2:s}=this,e=Math.PI*2*(l/60)-Math.PI/2,f=i?h.CLOCK_RADIUS-h.HOUR_HAND_TRUNCATION:h.CLOCK_RADIUS,d={x:this.centerX+Math.cos(e)*(f-s.width/2),y:this.centerY+Math.sin(e)*(f-s.width/2)};return r.strokeStyle="rgba(100,100,255,0.5)",r.beginPath(),r.moveTo(this.centerX,this.centerY),r.lineTo(d.x,d.y),r.stroke(),s.x=this.centerX+Math.cos(e)*f-s.width/2,s.y=this.centerY+Math.sin(e)*f-s.height/2,s.paint(r),this}}export{u as BallPainter,g as Demo};
