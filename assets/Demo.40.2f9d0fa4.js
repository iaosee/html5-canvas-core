var m=Object.defineProperty;var g=(n,a,e)=>a in n?m(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e;var r=(n,a,e)=>(g(n,typeof a!="symbol"?a+"":a,e),e);import{G as d}from"./lil-gui.esm.7a5dd4ff.js";import{B as w}from"./BaseDemo.9c35b300.js";import{S as f,E as p,B as F,N as S}from"./SunglassesFilter.9d2d86ac.js";import{i as b}from"./flower.21c0439b.js";class o extends w{constructor(e){super(e);r(this,"name","\u56FE\u50CF\u5904\u7406 \u2014\u2014 \u57FA\u7840\u6EE4\u955C\u5B9E\u73B0");r(this,"image");r(this,"config",{scale:.2,resetScene:()=>this.drawScene(),filter:0});this.canvas=e,this.loadImage(b).then(s=>this.image=s).then(()=>{this.drawScene()}),this.createControl()}static init(e){return new o(e)}start(){return this}draw(){return this}createControl(){const{config:e}=this;this.gui=new d;const{gui:s}=this;return s.add(e,"scale").step(.01).min(.1).max(1).onChange(()=>this.drawScene()),s.add(e,"resetScene"),s.add(e,"filter",{default:0,negative:1,black_white:2,embossment:3,sunglasses:4}).onFinishChange(t=>this.applyFilter(Number(t))),this}drawScene(){const{context:e,config:s,image:t}=this,i=this.width,l=this.height,u=t.width*s.scale/t.width,h=t.width*s.scale,c=t.height*u;return e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.image,-h/2+i/2,-c/2+l/2,h,c),this}applyFilter(e){const{context:s}=this;this.drawScene();let t=null;const i=s.getImageData(0,0,this.canvas.width,this.canvas.height);switch(e){case 1:t=new S(i);break;case 2:t=new F(i);break;case 3:t=new p(i);break;case 4:t=new f(i);break;default:t=null}t&&t.dye(),s.putImageData(i,0,0)}}export{o as Demo};
