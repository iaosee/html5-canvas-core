var c=Object.defineProperty;var l=(o,t,e)=>t in o?c(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var h=(o,t,e)=>(l(o,typeof t!="symbol"?t+"":t,e),e);class a{constructor(t,e){h(this,"x");h(this,"y");this.x=t||0,this.y=e||0}move(t,e){return this.x+=t,this.y+=e,this}equals(t){return this.x===t.x&&this.y===t.y}distance(t){return Math.abs(Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)))}rotate(t,e){const s=this.x-t.x,i=this.y-t.y,n=s*Math.cos(-e)-i*Math.sin(-e),r=s*Math.sin(-e)+i*Math.cos(-e);return new a(n+t.x,r+t.y)}rotateFromOrigin(t){const{x:e,y:s}=this,i=Math.cos(-t),n=Math.sin(-t);return new a(e*i-s*n,s*i+e*n)}slope(t){return Math.abs(t.x-this.x)===0?1/0:(t.y-this.y)/(t.x-this.x)}azimuth(t){return Math.atan2(t.y-this.y,t.x-this.x)/(Math.PI/180)}}class u{constructor(t){h(this,"name","Canvas Demo");h(this,"config",{});h(this,"player",null);h(this,"context");h(this,"dpr",window.devicePixelRatio||1);h(this,"gui");h(this,"stats");if(this.canvas=t,!t||!(t instanceof HTMLCanvasElement))throw new Error("Error: The argument must be a Canvas element");this.context=this.canvas.getContext("2d"),this.setViewport()}get width(){return this.canvas.getBoundingClientRect().width}get height(){return this.canvas.getBoundingClientRect().height}get center(){return new a(this.centerX,this.centerY)}get centerX(){return this.width/2}get centerY(){return this.height/2}get viewMin(){return this.width<this.height?this.width:this.height}start(){return this.startPlay()}stop(){return this.stopPlay()}destroy(){this.stop(),this.gui&&this.gui.destroy(),this.stats&&this.stats.dom.remove()}setViewport(){const{canvas:t,context:e,dpr:s}=this,i=t.getBoundingClientRect(),n=i.width,r=i.height;return s!==1?(t.style.width=n+"px",t.style.height=r+"px",t.width=n*s,t.height=r*s,e.scale(s,s)):(t.width=window.innerWidth,t.height=window.innerHeight),this}draw(t){const{context:e}=this;return this.clearScreen(),e.font="50px Palatino",e.textAlign="center",e.fillStyle="rgba(64,158,255,1.0)",e.fillText("Hello World, Hello Canvas \u{1F600}\u{1F602}\u{1F604} !",this.centerX,this.centerY),this}clearScreen(){const{context:t}=this;return t.clearRect(0,0,this.canvas.width,this.canvas.height),this}drawFpsLabel(t){const{context:e}=this;return e.save(),e.font="20px Palatino",e.fillStyle="cornflowerblue",e.fillText(t.toFixed()+" fps",20,this.height-20),e.restore(),this}startPlay(){console.log("play animate.");const t=e=>{this.draw(e),this.player=requestAnimationFrame(t)};return this.player&&this.stopPlay(),this.player=requestAnimationFrame(t),this}stopPlay(){return cancelAnimationFrame(this.player),this}drawGrid(t=25,e=25,s="rgba(0,0,0,0.1)"){const{context:i}=this;i.save(),i.strokeStyle=s,i.lineWidth=.5;for(let n=t+.5,r=this.width;n<r;n+=t)i.beginPath(),i.moveTo(n,0),i.lineTo(n,this.height),i.stroke();for(let n=e+.5,r=this.height;n<r;n+=e)i.beginPath(),i.moveTo(0,n),i.lineTo(this.width,n),i.stroke();return i.restore(),this}loadImage(t){return new Promise((e,s)=>{const i=new Image;i.src=t,i.onload=n=>{e(n.target)}})}drawGuidelines(t,e,s="rgba(43,134,66,0.6)"){const{context:i}=this;return i.strokeStyle=s,i.lineWidth=1,this.drawVerticalLine(t).drawHorizontalLine(e)}drawVerticalLine(t){const{context:e}=this;return e.save(),e.beginPath(),e.moveTo(t+.5,0),e.lineTo(t+.5,this.height),e.stroke(),e.restore(),this}drawHorizontalLine(t){const{context:e}=this;return e.save(),e.beginPath(),e.moveTo(0,t+.5),e.lineTo(this.width,t+.5),e.stroke(),e.restore(),this}coordinateTransformation(t,e){const{canvas:s}=this,i=s.getBoundingClientRect(),n=t-i.left*(this.width/i.width),r=e-i.top*(this.height/i.height);return new a(n,r)}throttle(t,e){let s=null;return function(){const i=+new Date;(!s||i-s>e)&&(t.apply(null,[...arguments]),s=i)}}randomRgba(){return"rgba("+(Math.random()*255).toFixed(0)+", "+(Math.random()*255).toFixed(0)+", "+(Math.random()*255).toFixed(0)+", "+(Math.random()+0).toFixed(1)+")"}rgbaFromArr(t){return t&&t.length?`rgba(${t[0]},${t[1]},${t[2]},${t[3]})`:null}degreesToRadian(t){return t*(Math.PI/180)}radianToDegrees(t){return t/(Math.PI/180)}}export{u as B,a as P};
