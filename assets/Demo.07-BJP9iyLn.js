import{G as m}from"./lil-gui.esm-hsJpI9MV.js";import{R as g}from"./index-BAL6X_Bf.js";import{B as u}from"./BaseDemo-CScLeyCm.js";class h extends u{constructor(t){super(t),this.name="移动的字符",this.letters=[],this.random=g.init(-5,5),this.letterString="abcdefghijklmnopqrstuvwxyz~!@#$%^&*()_+`1234567890-=[];',./<>?:\"{}".split(""),this.emojiString=["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","🥰","😗","😙","😚","🙂","🤗","🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","🤐","😯","😪","😫","🥱","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","🙁","😖","😞","😟","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","🥴","😠","😡","🤬","😷","🤒","🤕","🤢","🤮","🤧","😇","🥳","🥺","🤠","🤡","🤥","🤫","🤭","🧐","🤓","😈","👿","👹","👺","💀","👻","👽","👾","🤖","💩","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🐱‍👤","🐱‍🏍","🐱‍💻","🐱‍🐉","🐱‍👓","🐱‍🚀","🙈","🙉","🙊","🐵","🐶","🐺","🐱","🦁","🐯","🦒","🦊","🦝","🐮","🐷","🐗","🐭","🐹","🐰","🐻","🐨","🐼","🐸","🦓","🐴","🦄","🐔","🐲","🐽","🐾","🐒","🦍","🦧","🦮","🐕‍🦺","🐩","🐕","🐈","🐅","🐆","🐎","🦌","🦏","🦛","🐂","🐃","🐄","🐖","🐏","🐑","🐐","🐪","🐫","🦙","🦘","🦥","🦨","🦡","🐘","🐁","🐀","🦔","🐇","🐿","🦎","🐊","🐢","🐍","🐉","🦕","🦖","🦦","🦈","🐬","🐳","🐋","🐟","🐠","🐡","🦐","🐙","🦑","🦞","🦀","🐚","🦆","🐓","🦃","🦅","🦢","🦜","🦩","🦚","🦉","🐦","🐧","🐥","🐤","🐣","🦇","🦋","🐌","🐛","🦟","🦗","🐜","🐝","🐞","🦂","🦠","🧞‍♀️","🧞‍♂️","👤","👥","👀","🦴","🦷","👄"],this.mousePosition={x:0,y:0},this.config={quantity:100,letterType:1,lineType:0,displayLetter:!0},this.createControl().createLetter(null,this.config.quantity).listenEvents()}static init(t){return new h(t)}draw(){return this.clearScreen().drawGrid().drawLines().drawLetters()}createControl(){const{config:t}=this;this.gui=new m;const{gui:o}=this;return o.add(t,"quantity").min(5).max(500).step(5).onFinishChange(i=>{t.quantity=Number(i),this.createLetter(this.center,t.quantity,!0)}),o.add(t,"letterType",{char:1,emoji:2}).onFinishChange(i=>{t.letterType=Number(i),this.createLetter(this.center,t.quantity,!0)}),o.add(t,"lineType",{none:0,ligature:1,breaking:2,connection:3}).onFinishChange(i=>{t.lineType=Number(i)}),o.add(t,"displayLetter").onFinishChange(i=>{t.displayLetter=!!i}),this}createLetter(t,o=50,i=!1){const{config:e}=this,n=e.letterType===1?this.letterString:this.emojiString;t=t||{x:this.random.range(0,this.width).getOne(),y:this.random.range(0,this.height).getOne()},i&&this.letters.splice(0,this.letters.length);for(let s=0;s<o;s++){const a={x:t.x||this.centerX,y:t.y||this.centerY},c=this.random.range(0,n.length-1).getOne();this.letters.push({position:a,velocityX:Math.random()*(this.random.range(-4,4).getOne()||4),velocityY:Math.random()*(this.random.range(-4,4).getOne()||4),color:this.randomRgba(),size:this.random.range(12,50).getOne(),symbol:n[c]})}return this}drawLetters(){const{letters:t,config:o,context:i}=this;for(let e=0,n=t.length;e<n;e++)this.updatePosition(t[e]),o.displayLetter&&(i.fillStyle=t[e].color,i.font=`${t[e].size}px Palatino`,i.textAlign="center",i.textBaseline="middle",i.fillText(t[e].symbol,t[e].position.x,t[e].position.y));return this}drawLines(){const{config:t,context:o,letters:i}=this;switch(t.lineType){case 1:o.beginPath(),o.moveTo(i[0].position.x,i[0].position.y);for(let e=1,n=i.length;e<n;e++)o.strokeStyle=i[e].color,o.lineTo(i[e].position.x,i[e].position.y);o.closePath(),o.stroke();break;case 2:o.beginPath();for(let e=0,n=i.length;e<n;e++){o.strokeStyle=i[e].color;for(let r=e+1,l=i.length;r<l;r++){const y=Math.pow(i[r].position.x-i[e].position.x,2),p=Math.pow(i[r].position.y-i[e].position.y,2),d=Math.sqrt(y+p);Math.abs(d)>100||(o.moveTo(i[e].position.x,i[e].position.y),o.lineTo(i[r].position.x,i[r].position.y))}if(this.mousePosition.x===0&&this.mousePosition.y===0)continue;const s=Math.pow(this.mousePosition.x-i[e].position.x,2),a=Math.pow(this.mousePosition.y-i[e].position.y,2),c=Math.sqrt(s+a);Math.abs(c)>150||(o.moveTo(this.mousePosition.x,this.mousePosition.y),o.lineTo(i[e].position.x,i[e].position.y))}o.closePath(),o.stroke();break;case 3:o.beginPath();for(let e=0,n=i.length;e<n;e++){o.strokeStyle=i[e].color;for(let s=e+1,a=i.length;s<a;s++)o.moveTo(i[e].position.x,i[e].position.y),o.lineTo(i[s].position.x,i[s].position.y)}o.closePath(),o.stroke();break}return this}updatePosition(t){return(t.position.x+t.velocityX>this.width||t.position.x+t.velocityX<0)&&(t.velocityX=-t.velocityX),(t.position.y+t.velocityY>this.height||t.position.y+t.velocityY<0)&&(t.velocityY=-t.velocityY),t.position.x+=t.velocityX,t.position.y+=t.velocityY,this}listenEvents(){const{canvas:t}=this,o=e=>{const n=this.coordinateTransformation(e.clientX,e.clientY);this.createLetter(n,20,!1)},i=e=>{const n=this.coordinateTransformation(e.clientX,e.clientY);this.mousePosition=n};t.addEventListener("mousemove",i,!1),t.addEventListener("click",o,!1)}}export{h as Demo};
