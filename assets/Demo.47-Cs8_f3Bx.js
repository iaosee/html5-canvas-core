var d=Object.defineProperty;var m=(r,i,t)=>i in r?d(r,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[i]=t;var a=(r,i,t)=>m(r,typeof i!="symbol"?i+"":i,t);import{G as c}from"./lil-gui.esm-hsJpI9MV.js";import{S as w}from"./stats.min-BpIepu9J.js";import{B as f}from"./BaseDemo-DB1y7toB.js";import{i as g}from"./sky-DGchKoT-.js";class h extends f{constructor(t){super(t);a(this,"name","动画 —— 背景连续动画");a(this,"lastTime",0);a(this,"sky");a(this,"skyOffset",0);a(this,"config",{SKY_VELOCITY:100});this.canvas=t,this.createControl().initStats().loadImage(g).then(e=>this.sky=e).then(()=>this.startPlay())}static init(t){return new h(t)}start(){return this}draw(t){return this.clearScreen().drawGrid().drawScene(t),this.stats.update(),this.lastTime=t,this}initStats(){return this.stats=new w,this.stats.showPanel(0),document.body.appendChild(this.stats.dom),this}createControl(){const{config:t}=this;this.gui=new c;const{gui:e}=this;return e.add(t,"SKY_VELOCITY").min(10).max(1e3).step(10),this}drawScene(t){const{context:e,config:n,sky:s}=this,o=1e3/(t-this.lastTime);return this.skyOffset=this.skyOffset<s.width?this.skyOffset+n.SKY_VELOCITY/o:0,e.save(),e.translate(-this.skyOffset,0),e.drawImage(s,0,0),e.drawImage(s,s.width-2,0),e.drawImage(s,(s.width-2)*2,0),e.drawImage(s,0,s.height+50),e.drawImage(s,s.width-2,s.height+50),e.drawImage(s,(s.width-2)*2,s.height+50),e.restore(),this}}export{h as Demo};
