import{G as h}from"./lil-gui.esm.7a5dd4ff.js";import{S as n}from"./stats.min.9233e90c.js";import{B as o}from"./BaseDemo.deaf79c0.js";import{i as d}from"./sky.df5be63d.js";class i extends o{constructor(e){super(e),this.canvas=e,this.name="\u52A8\u753B \u2014\u2014 \u80CC\u666F\u8FDE\u7EED\u52A8\u753B",this.lastTime=0,this.skyOffset=0,this.config={SKY_VELOCITY:100},this.createControl().initStats().loadImage(d).then(s=>this.sky=s).then(()=>this.startPlay())}static init(e){return new i(e)}start(){return this}draw(e){return this.clearScreen().drawGrid().drawScene(e),this.stats.update(),this.lastTime=e,this}initStats(){return this.stats=new n,this.stats.showPanel(0),document.body.appendChild(this.stats.dom),this}createControl(){const{config:e}=this;this.gui=new h;const{gui:s}=this;return s.add(e,"SKY_VELOCITY").min(10).max(1e3).step(10),this}drawScene(e){const{context:s,config:a,sky:t}=this,r=1e3/(e-this.lastTime);return this.skyOffset=this.skyOffset<t.width?this.skyOffset+a.SKY_VELOCITY/r:0,s.save(),s.translate(-this.skyOffset,0),s.drawImage(t,0,0),s.drawImage(t,t.width-2,0),s.drawImage(t,(t.width-2)*2,0),s.drawImage(t,0,t.height+50),s.drawImage(t,t.width-2,t.height+50),s.drawImage(t,(t.width-2)*2,t.height+50),s.restore(),this}}export{i as Demo};
