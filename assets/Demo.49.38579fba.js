import{B as f,P as d}from"./BaseDemo.deaf79c0.js";class c extends f{constructor(i){super(i),this.canvas=i,this.name="\u62D6\u62FD\u4EA4\u4E92 \u2014\u2014 \u6254\u7403/\u60EF\u6027\u8FD0\u52A8",this.lastTime=0,this.ball={position:this.center,velocityX:5,velocityY:5,radius:100,color:this.randomRgba()},this.listenEvents(),this.drawGrid().drawCircle()}static init(i){return new c(i)}start(){return this}draw(){return this.clearScreen().drawGrid().drawCircle()}drawCircle(){const{context:i,ball:s}=this;return i.lineWidth=1.5,i.fillStyle=s.color,i.strokeStyle=s.color,i.beginPath(),i.arc(s.position.x,s.position.y,s.radius,0,Math.PI*2,!1),i.fill(),i.stroke(),this}setCirclePosition(i){const{context:s,ball:t}=this;return t.position=i,t.position.x+t.radius>this.width&&(t.position.x=this.width-t.radius),t.position.x-t.radius<0&&(t.position.x=t.radius),t.position.y+t.radius>this.height&&(t.position.y=this.height-t.radius),t.position.y-t.radius<0&&(t.position.y=t.radius),this}updatePosition(){const{ball:i}=this;return(i.position.x+i.velocityX+i.radius>this.width||i.position.x+i.velocityX-i.radius<0)&&(i.velocityX=-i.velocityX*.8),(i.position.y+i.velocityY+i.radius>this.height||i.position.y+i.velocityY-i.radius<0)&&(i.velocityY=-i.velocityY*.8),i.position.x+=i.velocityX,i.position.y+=i.velocityY,this}isPointInCirclePath(i){const{context:s,dpr:t,ball:o}=this;return s.beginPath(),s.arc(o.position.x,o.position.y,o.radius,0,Math.PI*2,!1),s.closePath(),s.isPointInPath(i.x*t,i.y*t)}animate(){this.updatePosition().draw(),this.player=requestAnimationFrame(this.animate.bind(this))}listenEvents(){const{canvas:i,ball:s}=this;let t=!1,o=null,n=null,a=null,l=0,u=0;const h=()=>{const e=u-l;return(Math.abs(n.x-o.x)+Math.abs(n.y-o.y))/e*10>10},p=e=>{o=this.coordinateTransformation(e.clientX,e.clientY),l=Date.now(),this.isPointInCirclePath(o)&&(this.stop(),t=!0,a=new d(o.x-s.position.x,o.y-s.position.y))},y=e=>{if(!t)return;const r=this.coordinateTransformation(e.clientX,e.clientY);this.setCirclePosition(new d(r.x-a.x,r.y-a.y)),this.draw()},m=e=>{u=Date.now(),n=this.coordinateTransformation(e.clientX,e.clientY),t&&h()&&(console.log("didThrow"),s.velocityX=(n.x-o.x)/20,s.velocityY=(n.y-o.y)/20,this.player=requestAnimationFrame(this.animate.bind(this))),t=!1};return i.addEventListener("mousedown",p,!1),i.addEventListener("mousemove",y,!1),document.addEventListener("mouseup",m,!1),document.addEventListener("contextmenu",e=>e.preventDefault(),!1),this}}export{c as Demo};
