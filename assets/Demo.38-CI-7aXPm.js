var c=Object.defineProperty;var u=(r,i,t)=>i in r?c(r,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[i]=t;var h=(r,i,t)=>u(r,typeof i!="symbol"?i+"":i,t);import{G as w}from"./lil-gui.esm-hsJpI9MV.js";import{R as l}from"./Rubberband-DpEanIXC.js";import{i as g}from"./flower-BOKp_aAz.js";import"./BaseDemo-DB1y7toB.js";class d extends l{constructor(t){super(t);h(this,"name","图像拖动裁剪缩放");h(this,"image");h(this,"config",{scale:1,resetScene:()=>this.drawScene()});this.canvas=t,this.loadImage(g).then(e=>this.image=e).then(()=>{this.drawScene()}),this.createControl().listenEvents()}static init(t){return new d(t)}start(){return this}draw(){return this}createControl(){const{config:t}=this;this.gui=new w;const{gui:e}=this;return e.add(t,"scale").step(.01).onChange(()=>this.drawScene()),e.add(t,"resetScene"),this}drawScene(){const{context:t,config:e}=this,s=this.width,n=this.height,a=s*e.scale,o=n*e.scale;return t.clearRect(0,0,this.width,this.height),t.drawImage(this.image,-a/2+s/2,-o/2+n/2,a,o),this}drawRubberbandShape(t){return this}onMouseupHandler(t){const{canvas:e,context:s,rubberbandRect:n}=this;super.onMouseupHandler(t),s.drawImage(e,(n.x+s.lineWidth*2)*this.dpr,(n.y+s.lineWidth*2)*this.dpr,(n.width-4*s.lineWidth)*this.dpr,(n.height-4*s.lineWidth)*this.dpr,0,0,this.width,this.height)}onKeydownHander(t){super.onKeydownHander(t),t.keyCode===32&&this.drawScene()}}export{d as Demo};
