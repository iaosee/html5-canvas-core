var d=Object.defineProperty;var m=(r,i,t)=>i in r?d(r,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[i]=t;var a=(r,i,t)=>(m(r,typeof i!="symbol"?i+"":i,t),t);import{G as u}from"./lil-gui.esm.7a5dd4ff.js";import{S as c}from"./stats.min.9233e90c.js";import{B as w}from"./BaseDemo.9c35b300.js";import{i as f}from"./sky.df5be63d.js";class h extends w{constructor(t){super(t);a(this,"name","\u52A8\u753B \u2014\u2014 \u80CC\u666F\u8FDE\u7EED\u52A8\u753B");a(this,"lastTime",0);a(this,"sky");a(this,"skyOffset",0);a(this,"config",{SKY_VELOCITY:100});this.canvas=t,this.createControl().initStats().loadImage(f).then(e=>this.sky=e).then(()=>this.startPlay())}static init(t){return new h(t)}start(){return this}draw(t){return this.clearScreen().drawGrid().drawScene(t),this.stats.update(),this.lastTime=t,this}initStats(){return this.stats=new c,this.stats.showPanel(0),document.body.appendChild(this.stats.dom),this}createControl(){const{config:t}=this;this.gui=new u;const{gui:e}=this;return e.add(t,"SKY_VELOCITY").min(10).max(1e3).step(10),this}drawScene(t){const{context:e,config:n,sky:s}=this,o=1e3/(t-this.lastTime);return this.skyOffset=this.skyOffset<s.width?this.skyOffset+n.SKY_VELOCITY/o:0,e.save(),e.translate(-this.skyOffset,0),e.drawImage(s,0,0),e.drawImage(s,s.width-2,0),e.drawImage(s,(s.width-2)*2,0),e.drawImage(s,0,s.height+50),e.drawImage(s,s.width-2,s.height+50),e.drawImage(s,(s.width-2)*2,s.height+50),e.restore(),this}}export{h as Demo};
