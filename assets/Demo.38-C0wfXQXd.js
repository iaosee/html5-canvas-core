import{G as a}from"./lil-gui.esm-hsJpI9MV.js";import{R as o}from"./Rubberband-oyprZb1N.js";import{i as d}from"./flower-BOKp_aAz.js";import"./BaseDemo-CScLeyCm.js";class h extends o{constructor(t){super(t),this.name="图像拖动裁剪缩放",this.config={scale:1,resetScene:()=>this.drawScene()},this.loadImage(d).then(e=>this.image=e).then(()=>{this.drawScene()}),this.createControl().listenEvents()}static init(t){return new h(t)}start(){return this}draw(){return this}createControl(){const{config:t}=this;this.gui=new a;const{gui:e}=this;return e.add(t,"scale").step(.01).onChange(()=>this.drawScene()),e.add(t,"resetScene"),this}drawScene(){const{context:t,config:e}=this,s=this.width,i=this.height,n=s*e.scale,r=i*e.scale;return t.clearRect(0,0,this.width,this.height),t.drawImage(this.image,-n/2+s/2,-r/2+i/2,n,r),this}drawRubberbandShape(t){return this}onMouseupHandler(t){const{canvas:e,context:s,rubberbandRect:i}=this;super.onMouseupHandler(t),s.drawImage(e,(i.x+s.lineWidth*2)*this.dpr,(i.y+s.lineWidth*2)*this.dpr,(i.width-4*s.lineWidth)*this.dpr,(i.height-4*s.lineWidth)*this.dpr,0,0,this.width,this.height)}onKeydownHander(t){super.onKeydownHander(t),t.keyCode===32&&this.drawScene()}}export{h as Demo};
