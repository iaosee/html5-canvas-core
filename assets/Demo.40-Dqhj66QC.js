var g=Object.defineProperty;var d=(n,a,e)=>a in n?g(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e;var r=(n,a,e)=>d(n,typeof a!="symbol"?a+"":a,e);import{G as w}from"./lil-gui.esm-hsJpI9MV.js";import{B as u}from"./BaseDemo-DB1y7toB.js";import{S as f,E as p,B as S,N as b}from"./SunglassesFilter-DVzImb6D.js";import{i as F}from"./flower-BOKp_aAz.js";class o extends u{constructor(e){super(e);r(this,"name","图像处理 —— 基础滤镜实现");r(this,"image");r(this,"config",{scale:.2,resetScene:()=>this.drawScene(),filter:0});this.canvas=e,this.loadImage(F).then(s=>this.image=s).then(()=>{this.drawScene()}),this.createControl()}static init(e){return new o(e)}start(){return this}draw(){return this}createControl(){const{config:e}=this;this.gui=new w;const{gui:s}=this;return s.add(e,"scale").step(.01).min(.1).max(1).onChange(()=>this.drawScene()),s.add(e,"resetScene"),s.add(e,"filter",{default:0,negative:1,black_white:2,embossment:3,sunglasses:4}).onFinishChange(t=>this.applyFilter(Number(t))),this}drawScene(){const{context:e,config:s,image:t}=this,i=this.width,l=this.height,m=t.width*s.scale/t.width,h=t.width*s.scale,c=t.height*m;return e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.image,-h/2+i/2,-c/2+l/2,h,c),this}applyFilter(e){const{context:s}=this;this.drawScene();let t=null;const i=s.getImageData(0,0,this.canvas.width,this.canvas.height);switch(e){case 1:t=new b(i);break;case 2:t=new S(i);break;case 3:t=new p(i);break;case 4:t=new f(i);break;default:t=null}t&&t.dye(),s.putImageData(i,0,0)}}export{o as Demo};
