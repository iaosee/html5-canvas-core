var d=Object.defineProperty;var l=(o,i,t)=>i in o?d(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var a=(o,i,t)=>l(o,typeof i!="symbol"?i+"":i,t);import{B as y}from"./BaseDemo-DB1y7toB.js";import{R as c}from"./index-BQRu6cko.js";class r extends y{constructor(t){super(t);a(this,"name","圆形泡泡");a(this,"circles",[]);a(this,"random",c.init(-5,5));this.canvas=t;const s={x:this.centerX,y:this.centerY};this.createCircle(s,50).listenEvents()}static init(t){return new r(t)}draw(){return this.clearScreen().drawGrid().drawCircles()}createCircle(t,s=100,e=!1){e&&this.circles.splice(0,this.circles.length);for(let n=0;n<s;n++){const h={x:t.x||this.centerX,y:t.y||this.centerY};this.circles.push({position:h,velocityX:Math.random()*(this.random.range(-8,8).getOne()||8),velocityY:Math.random()*(this.random.range(-8,8).getOne()||8),radius:Math.random()*20,color:this.randomRgba()})}return this}drawCircles(){const{context:t}=this;return this.circles.forEach(s=>{t.beginPath(),t.arc(s.position.x,s.position.y,s.radius,0,Math.PI*2,!1),t.fillStyle=s.color,t.fill(),this.updatePosition(s)}),this}updatePosition(t){return(t.position.x+t.velocityX+t.radius>this.width||t.position.x+t.velocityX-t.radius<0)&&(t.velocityX=-t.velocityX),(t.position.y+t.velocityY+t.radius>this.height||t.position.y+t.velocityY-t.radius<0)&&(t.velocityY=-t.velocityY),t.position.x+=t.velocityX,t.position.y+=t.velocityY,this}listenEvents(){const{canvas:t}=this,s=e=>{const n=this.coordinateTransformation(e.clientX,e.clientY);e.type==="click"&&this.circles.splice(0,Math.floor(this.circles.length/2)),this.createCircle(n,100,!1)};t.addEventListener("mousemove",this.throttle(s,100),!1),t.addEventListener("click",s,!1)}}export{r as Demo};
