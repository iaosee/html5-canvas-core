import{G as i}from"./lil-gui.esm-hsJpI9MV.js";import{B as n}from"./BaseDemo-CScLeyCm.js";const a=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];class s extends n{constructor(t){super(t),this.name="图像合成",this.config={globalAlpha:1,compositeMode:"source-over",textColor:[100,149,237,.8],coverColor:[255,0,0,.8]},this.createControl().listenEvents()}static init(t){return new s(t)}start(){return this.draw()}createControl(){const{config:t}=this;this.gui=new i;const{gui:o}=this;return o.addColor(t,"textColor",255).onFinishChange(e=>this.draw()),o.addColor(t,"coverColor",255),o.add(t,"globalAlpha").min(.1).max(1).step(.1),o.add(t,"compositeMode",a),this}draw(){return this.clearScreen().drawGrid().drawText()}setComposite(t){return this.config.compositeMode=t,this}drawText(){const{context:t,config:o}=this;t.save(),t.shadowColor="rgba(100, 100, 150, 0.8)",t.shadowOffsetX=5,t.shadowOffsetY=5,t.shadowBlur=10,t.font="160px Palatino",t.fillStyle=this.rgbaFromArr(o.textColor);const e="HTML5 Canvas",r=t.measureText(e);return t.fillText(e,this.centerX-r.width/2,this.centerY),t.strokeStyle="yellow",t.strokeText(e,this.centerX-r.width/2,this.centerY),t.restore(),this}drawCover(t){const{context:o,config:e}=this,r=this.coordinateTransformation(t.clientX,t.clientY);o.save(),o.globalAlpha=e.globalAlpha,o.globalCompositeOperation=e.compositeMode,o.beginPath(),o.arc(r.x,r.y,100,0,Math.PI*2,!1),o.fillStyle=this.rgbaFromArr(e.coverColor),o.stroke(),o.fill(),o.restore()}listenEvents(){const{canvas:t}=this;return t.addEventListener("mousemove",o=>this.draw().drawCover(o)),this}}export{s as Demo};
