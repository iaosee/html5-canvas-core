import{G as d}from"./lil-gui.esm.7a5dd4ff.js";import{R as m}from"./index.87763aee.js";import{B as f}from"./BaseDemo.deaf79c0.js";class h extends f{constructor(t){super(t),this.canvas=t,this.name="\u79FB\u52A8\u7684\u5C0F\u7403",this.circles=[],this.random=m.init(-5,5),this.mousePosition={x:0,y:0},this.config={circleQuantity:50,lineType:1};const o={x:this.centerX,y:this.centerY};this.createControl().createCircle(o,this.config.circleQuantity).listenEvents()}static init(t){return new h(t)}draw(){return this.clearScreen().drawGrid().drawLines().drawCircles()}createControl(){const{config:t}=this;this.gui=new d;const{gui:o}=this;return o.add(t,"circleQuantity").min(5).max(1e3).step(5).onFinishChange(i=>{t.circleQuantity=Number(i),this.createCircle(this.center,t.circleQuantity,!0)}),o.add(t,"lineType",{none:0,ligature:1,breaking:2,connection:3}).onFinishChange(i=>{t.lineType=Number(i)}),this}createCircle(t,o=50,i=!1){i&&this.circles.splice(0,this.circles.length);for(let s=0;s<o;s++){const n={x:t.x||this.centerX,y:t.y||this.centerY};this.circles.push({position:n,velocityX:Math.random()*(this.random.range(-2,2).getOne()||2),velocityY:Math.random()*(this.random.range(-2,2).getOne()||2),radius:this.random.range(5,10).getOne(),color:this.randomRgba()})}return this}drawCircles(){const{context:t}=this;return this.circles.forEach(o=>{t.beginPath(),t.arc(o.position.x,o.position.y,o.radius,0,Math.PI*2,!1),t.fillStyle=o.color,t.fill(),this.updatePosition(o)}),this}drawLines(){const{config:t,context:o,circles:i}=this;switch(t.lineType){case 1:o.beginPath(),o.moveTo(i[0].position.x,i[0].position.y);for(let s=1,n=i.length;s<n;s++)o.strokeStyle=i[s].color,o.lineTo(i[s].position.x,i[s].position.y);o.closePath(),o.stroke();break;case 2:o.beginPath();for(let s=0,n=i.length;s<n;s++){o.strokeStyle=i[s].color;for(let a=s+1,c=i.length;a<c;a++){const l=Math.pow(i[a].position.x-i[s].position.x,2),p=Math.pow(i[a].position.y-i[s].position.y,2),y=Math.sqrt(l+p);Math.abs(y)>100||(o.moveTo(i[s].position.x,i[s].position.y),o.lineTo(i[a].position.x,i[a].position.y))}if(this.mousePosition.x===0&&this.mousePosition.y===0)continue;const e=Math.pow(this.mousePosition.x-i[s].position.x,2),r=Math.pow(this.mousePosition.y-i[s].position.y,2),u=Math.sqrt(e+r);Math.abs(u)>150||(o.moveTo(this.mousePosition.x,this.mousePosition.y),o.lineTo(i[s].position.x,i[s].position.y))}o.closePath(),o.stroke();break;case 3:o.beginPath();for(let s=0,n=i.length;s<n;s++){o.strokeStyle=i[s].color;for(let e=s+1,r=i.length;e<r;e++)o.moveTo(i[s].position.x,i[s].position.y),o.lineTo(i[e].position.x,i[e].position.y)}o.closePath(),o.stroke();break}return this}updatePosition(t){(t.position.x+t.velocityX+t.radius>this.width||t.position.x+t.velocityX-t.radius<0)&&(t.velocityX=-t.velocityX),(t.position.y+t.velocityY+t.radius>this.height||t.position.y+t.velocityY-t.radius<0)&&(t.velocityY=-t.velocityY);const o=Math.pow(this.mousePosition.x-t.position.x,2),i=Math.pow(this.mousePosition.y-t.position.y,2),s=Math.sqrt(o+i);return Math.abs(s)<50?(t.origin_radius||(t.origin_radius=t.radius),t.radius<=50&&(t.radius+=2)):t.radius>=t.origin_radius&&(t.radius-=2),t.position.x+=t.velocityX,t.position.y+=t.velocityY,this}listenEvents(){const{canvas:t}=this,o=s=>{const n=this.coordinateTransformation(s.clientX,s.clientY);this.createCircle(n,20,!1)},i=s=>{const n=this.coordinateTransformation(s.clientX,s.clientY);this.mousePosition=n};t.addEventListener("mousemove",i,!1),t.addEventListener("click",o,!1)}}export{h as Demo};
