var g=Object.defineProperty;var o=(h,s,i)=>s in h?g(h,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[s]=i;var t=(h,s,i)=>o(h,typeof s!="symbol"?s+"":s,i);import{G as d}from"./lil-gui.esm-hsJpI9MV.js";import{B as w}from"./BaseDemo-DB1y7toB.js";import{S as I}from"./Sprite-9nB6cOPC.js";class e extends w{constructor(i){super(i);t(this,"name","钟摆运动");t(this,"pendulum");t(this,"startTime",0);t(this,"config",{PIVOT_Y:50,PIVOT_RADIUS:7,WEIGHT_RADIUS:25,INITIAL_ANGLE:Math.PI/4,ROD_LENGTH_IN_PIXELS:300});this.canvas=i,this.createControl().initSprite()}static init(i){return new e(i)}createControl(){const{config:i}=this;this.gui=new d;const{gui:a}=this;return a.add(i,"PIVOT_Y").min(50).max(this.height-300).step(10).onFinishChange(()=>this.resetSpriteStatus()),a.add(i,"WEIGHT_RADIUS").min(10).max(100).step(10).onFinishChange(()=>this.resetSpriteStatus()),a.add(i,"ROD_LENGTH_IN_PIXELS").min(10).max(1e3).step(10).onFinishChange(()=>this.resetSpriteStatus()),this}draw(i){return this.clearScreen().drawGrid().drawScene(i)}initSprite(){const{context:i,config:a}=this;return this.pendulum=new O,this.resetSpriteStatus(),i.lineWidth=.5,i.strokeStyle="rgba(0,0,0,0.5)",i.shadowOffsetX=2,i.shadowOffsetY=2,i.shadowBlur=4,this}drawScene(i){const{context:a,pendulum:r}=this;return r.update(a,i),r.paint(a),this}resetSpriteStatus(){const{config:i,pendulum:a}=this;return this.pendulum.x=this.width/2,this.pendulum.y=i.PIVOT_Y,this.pendulum.weightRadius=i.WEIGHT_RADIUS,this.pendulum.pivotRadius=i.PIVOT_RADIUS,this.pendulum.initialAngle=i.INITIAL_ANGLE,this.pendulum.angle=i.INITIAL_ANGLE,this.pendulum.rodLength=i.ROD_LENGTH_IN_PIXELS,this}}class O extends I{constructor(i="PendulumSprite"){super(i);t(this,"angle",0);t(this,"weightRadius",0);t(this,"pivotRadius",0);t(this,"initialAngle",0);t(this,"rodLength",0);t(this,"weightX",0);t(this,"weightY",0);this.painter=new S,this.addBehavior(new l)}}class S{constructor(){t(this,"PIVOT_FILL_STYLE","rgba(0,0,0,0.2)");t(this,"WEIGHT_SHADOW_COLOR","rgb(0,0,0)");t(this,"PIVOT_SHADOW_COLOR","rgb(255,255,0)");t(this,"STROKE_COLOR","rgb(100,100,195)")}paint(s,i){this.drawPivot(s,i),this.drawRod(s,i),this.drawWeight(s,i)}drawPivot(s,i){i.save(),i.beginPath(),i.shadowColor=void 0,i.shadowBlur=void 0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.fillStyle="white",i.arc(s.x,s.y,s.pivotRadius/2,0,Math.PI*2,!1),i.fill(),i.stroke(),i.beginPath(),i.fillStyle=this.PIVOT_FILL_STYLE,i.arc(s.x,s.y,s.pivotRadius,0,Math.PI*2,!1),i.fill(),i.stroke(),i.restore()}drawRod(s,i){i.beginPath(),i.moveTo(s.x,s.y),i.lineTo(s.weightX,s.weightY),i.stroke()}drawWeight(s,i){i.save(),i.beginPath(),i.arc(s.weightX,s.weightY,s.weightRadius,0,Math.PI*2,!1),i.clip(),i.shadowColor=this.WEIGHT_SHADOW_COLOR,i.shadowOffsetX=-4,i.shadowOffsetY=-4,i.shadowBlur=8,i.lineWidth=2,i.strokeStyle=this.STROKE_COLOR,i.stroke(),i.beginPath(),i.arc(s.weightX,s.weightY,s.weightRadius/2,0,Math.PI*2,!1),i.clip(),i.shadowColor=this.PIVOT_SHADOW_COLOR,i.shadowOffsetX=-4,i.shadowOffsetY=-4,i.shadowBlur=8,i.stroke(),i.restore()}}class l{constructor(){t(this,"GRAVITY_FORCE",32);t(this,"ROD_LENGTH",.8);t(this,"startTime",0)}execute(s,i,a){this.startTime||(this.startTime=a);const r=(a-this.startTime)/1e3;s.angle=s.initialAngle*Math.cos(Math.sqrt(this.GRAVITY_FORCE/this.ROD_LENGTH)*r),s.weightX=s.x+Math.sin(s.angle)*s.rodLength,s.weightY=s.y+Math.cos(s.angle)*s.rodLength}}export{e as Demo,S as PendulumPainter,O as PendulumSprite,l as SwingBehavior};
