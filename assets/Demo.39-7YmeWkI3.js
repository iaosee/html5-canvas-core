import{G as d}from"./lil-gui.esm-hsJpI9MV.js";import{B as g}from"./BaseDemo-CScLeyCm.js";import{i as m}from"./flower-BOKp_aAz.js";class h extends g{constructor(t){super(t),this.name="图像处理 —— 反色",this.config={scale:.2,resetScene:()=>this.drawScene(),negative:()=>this.updatePixel()},this.loadImage(m).then(i=>this.image=i).then(()=>{this.drawScene()}),this.createControl()}static init(t){return new h(t)}start(){return this}draw(){return this}createControl(){const{config:t}=this;this.gui=new d;const{gui:i}=this;return i.add(t,"scale").step(.01).min(.1).max(1).onChange(()=>this.drawScene()),i.add(t,"resetScene"),i.add(t,"negative"),this}drawScene(){const{canvas:t,context:i,config:s,image:e}=this,r=this.width,c=this.height,o=e.width*s.scale/e.width,a=e.width*s.scale/this.dpr,n=e.height*o/this.dpr;return i.clearRect(0,0,t.width,t.height),i.drawImage(this.image,-a/2+r/2,-n/2+c/2,a,n),this}updatePixel(){const{context:t}=this,i=t.getImageData(0,0,this.canvas.width,this.canvas.height),s=i.data;for(let e=0;e<=s.length-4;e+=4)s[e]=255-s[e],s[e+1]=255-s[e+1],s[e+2]=255-s[e+2];t.putImageData(i,0,0)}}export{h as Demo};
